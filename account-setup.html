<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>T1ERA — Account Setup</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Sans:wght@300;400;500;600;700&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/@phosphor-icons/web@2.1.1/src/index.js"></script>
  <style>
    :root{
      --bg:#050508;
      --bg2:#0c0c12;
      --bg3:#111118;
      --bdr:rgba(255,255,255,.07);
      --bdrf:rgba(236,72,153,.6);
      --bdrok:rgba(16,185,129,.5);
      --bdrerr:rgba(239,68,68,.5);
      --txt:#f0f0ff;
      --txt2:rgba(240,240,255,.55);
      --txt3:rgba(240,240,255,.25);
      --ind:#ec4899;
      --ind2:#a855f7;
      --ind3:#c084fc;
      --green:#10b981;
      --red:#ef4444;
      --amber:#f59e0b;
      --ease:cubic-bezier(0.4,0,0.2,1);
      --bouncy:cubic-bezier(0.34,1.56,0.64,1);
    }
    *,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
    html,body{min-height:100%;font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--txt);-webkit-font-smoothing:antialiased;overflow-x:hidden;}

    /* ── BG ── */
    .bg-layer{position:fixed;inset:0;z-index:0;pointer-events:none;}
    .bg-grid{
      background-image:
        linear-gradient(rgba(236,72,153,.04) 1px,transparent 1px),
        linear-gradient(90deg,rgba(236,72,153,.04) 1px,transparent 1px);
      background-size:48px 48px;
    }
    .bg-glow{
      background:
        radial-gradient(ellipse at 20% 10%,rgba(236,72,153,.12),transparent 50%),
        radial-gradient(ellipse at 80% 90%,rgba(168,85,247,.09),transparent 50%),
        radial-gradient(ellipse at 50% 50%,rgba(192,132,252,.05),transparent 60%);
    }
    .bg-noise{opacity:.025;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");background-size:200px;}

    /* ══════════════════════════════════════════
       GATE SCREEN — Canva dark pink × purple × white
    ══════════════════════════════════════════ */
    #gateScreen{
      position:fixed;inset:0;z-index:9999;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      gap:20px;
      /* rich dark background with Canva-style deep purple-pink mesh */
      background:
        radial-gradient(ellipse at 25% 20%, rgba(168,42,120,.55) 0%, transparent 50%),
        radial-gradient(ellipse at 75% 80%, rgba(109,40,217,.60) 0%, transparent 50%),
        radial-gradient(ellipse at 60% 10%, rgba(219,39,119,.30) 0%, transparent 40%),
        radial-gradient(ellipse at 10% 90%, rgba(88,28,135,.70) 0%, transparent 45%),
        linear-gradient(135deg,#12041e 0%,#1e0533 40%,#2d0a1e 70%,#180330 100%);
      overflow:hidden;
    }
    /* subtle animated noise grain overlay on gate */
    #gateScreen::before{
      content:'';position:absolute;inset:0;z-index:0;pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23g)' opacity='0.07'/%3E%3C/svg%3E");
      background-size:180px;
    }
    /* floating glow orbs */
    #gateScreen::after{
      content:'';position:absolute;inset:0;z-index:0;pointer-events:none;
      background:
        radial-gradient(circle at 50% 50%, rgba(236,72,153,.08) 0%, transparent 60%);
      animation:gateOrbPulse 3s ease-in-out infinite;
    }
    @keyframes gateOrbPulse{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.15);opacity:.6}}

    #gateScreen.hidden{display:none;}

    /* everything inside gate screen sits above the pseudo overlays */
    #gateScreen > *{position:relative;z-index:1;}

    /* ── CANVA-STYLE TRIPLE-RING SPINNER ── */
    .gate-spinner{
      position:relative;
      width:56px;height:56px;
    }
    .gate-spinner::before,
    .gate-spinner::after,
    .gate-spinner span{
      content:'';
      position:absolute;
      border-radius:50%;
      border-style:solid;
      border-color:transparent;
    }
    /* outer ring — hot pink */
    .gate-spinner::before{
      inset:0;
      border-width:3px;
      border-top-color:#ec4899;
      border-right-color:rgba(236,72,153,.3);
      animation:gspin 1.1s linear infinite;
    }
    /* middle ring — soft purple */
    .gate-spinner::after{
      inset:9px;
      border-width:3px;
      border-top-color:#c084fc;
      border-left-color:rgba(192,132,252,.25);
      animation:gspin .8s linear infinite reverse;
    }
    /* inner dot — white glowing core */
    .gate-spinner span{
      inset:20px;
      background:radial-gradient(circle,#fff 0%,rgba(255,255,255,.4) 50%,transparent 100%);
      border:none;
      animation:gateCorePulse 1.4s ease-in-out infinite;
    }
    @keyframes gspin{to{transform:rotate(360deg)}}
    @keyframes gateCorePulse{0%,100%{transform:scale(1);opacity:.9}50%{transform:scale(1.3);opacity:.4}}

    /* ── STATUS TEXT ── */
    .gate-txt{
      font-family:'DM Sans',sans-serif;font-size:11px;font-weight:700;
      letter-spacing:.18em;text-transform:uppercase;
      /* white fading to soft pink */
      background:linear-gradient(90deg,rgba(255,255,255,.9),rgba(249,168,212,.7),rgba(255,255,255,.9));
      background-size:200% 100%;
      -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
      animation:gateTxtShimmer 2.2s ease-in-out infinite, gtxtpulse 1.6s ease-in-out infinite;
    }
    @keyframes gateTxtShimmer{0%{background-position:100% 0}100%{background-position:-100% 0}}
    @keyframes gtxtpulse{0%,100%{opacity:.55}50%{opacity:1}}

    /* ── LOGO ROW ── */
    .gate-logo{
      display:flex;align-items:center;gap:11px;margin-bottom:4px;
    }
    .gate-logomark{
      width:40px;height:40px;border-radius:11px;
      /* Canva-style pink-to-purple gradient */
      background:linear-gradient(135deg,#ec4899 0%,#a855f7 50%,#7c3aed 100%);
      display:flex;align-items:center;justify-content:center;
      font-family:'Orbitron',sans-serif;font-weight:900;font-size:13px;color:#fff;
      box-shadow:0 0 28px rgba(236,72,153,.5), 0 0 56px rgba(168,85,247,.25);
      animation:gateMarkGlow 2.5s ease-in-out infinite;
    }
    @keyframes gateMarkGlow{
      0%,100%{box-shadow:0 0 28px rgba(236,72,153,.5),0 0 56px rgba(168,85,247,.25);}
      50%{box-shadow:0 0 40px rgba(236,72,153,.8),0 0 80px rgba(168,85,247,.45);}
    }
    .gate-logotxt{
      font-family:'Orbitron',sans-serif;font-weight:900;font-size:20px;letter-spacing:.1em;
      /* pink → purple → white shimmer */
      background:linear-gradient(135deg,#f9a8d4 0%,#e879f9 30%,#c084fc 60%,#ffffff 100%);
      background-size:200% 100%;
      -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
      animation:gateLogoShimmer 3s ease-in-out infinite;
    }
    @keyframes gateLogoShimmer{0%,100%{background-position:0% 0}50%{background-position:100% 0}}

    /* ── DECORATIVE PILLS below spinner ── */
    .gate-pills{
      display:flex;gap:8px;align-items:center;margin-top:2px;
    }
    .gate-pill{
      width:6px;height:6px;border-radius:50%;
      animation:gatePillPop 1.4s ease-in-out infinite;
    }
    .gate-pill:nth-child(1){background:#ec4899;animation-delay:0s;}
    .gate-pill:nth-child(2){background:#c084fc;animation-delay:.18s;}
    .gate-pill:nth-child(3){background:#ffffff;animation-delay:.36s;}
    .gate-pill:nth-child(4){background:#c084fc;animation-delay:.54s;}
    .gate-pill:nth-child(5){background:#ec4899;animation-delay:.72s;}
    @keyframes gatePillPop{0%,100%{transform:scaleY(1);opacity:.5}50%{transform:scaleY(1.9);opacity:1}}

    /* ══════════════════════════════════════════
       SAVING SCREEN — reuses gate background + pill styles
       unique spinner, step tracker, and fade-in/out
    ══════════════════════════════════════════ */
    #savingScreen{
      position:fixed;inset:0;z-index:9998;
      display:none; /* shown via JS */
      flex-direction:column;align-items:center;justify-content:center;
      gap:20px;
      background:
        radial-gradient(ellipse at 30% 25%,  rgba(219,39,119,.50) 0%, transparent 50%),
        radial-gradient(ellipse at 70% 75%,  rgba(109,40,217,.58) 0%, transparent 50%),
        radial-gradient(ellipse at 65% 15%,  rgba(168,42,120,.28) 0%, transparent 42%),
        radial-gradient(ellipse at 15% 85%,  rgba(88,28,135,.68)  0%, transparent 44%),
        linear-gradient(135deg,#12041e 0%,#1e0533 40%,#2d0a1e 70%,#180330 100%);
      overflow:hidden;
    }
    #savingScreen::before{
      content:'';position:absolute;inset:0;z-index:0;pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23g)' opacity='0.07'/%3E%3C/svg%3E");
      background-size:180px;
    }
    #savingScreen::after{
      content:'';position:absolute;inset:0;z-index:0;pointer-events:none;
      background:radial-gradient(circle at 50% 45%,rgba(192,132,252,.09) 0%,transparent 60%);
      animation:gateOrbPulse 3.2s ease-in-out infinite;
    }
    #savingScreen.on{
      display:flex;
      animation:savingFadeIn .35s cubic-bezier(0.4,0,0.2,1) both;
    }
    #savingScreen.off{
      animation:savingFadeOut .4s cubic-bezier(0.4,0,0.2,1) forwards;
    }
    @keyframes savingFadeIn{from{opacity:0}to{opacity:1}}
    @keyframes savingFadeOut{from{opacity:1}to{opacity:0;pointer-events:none}}
    #savingScreen > *{position:relative;z-index:1;}

    /* ── SAVING SPINNER — SVG ring + pulsing core ── */
    .saving-spinner{
      position:relative;
      width:64px;height:64px;
      display:flex;align-items:center;justify-content:center;
    }
    .saving-spinner span{
      position:absolute;
      width:20px;height:20px;
      border-radius:50%;
      background:radial-gradient(circle,#fff 0%,rgba(249,168,212,.6) 45%,transparent 100%);
      animation:gateCorePulse 1.5s ease-in-out infinite;
      z-index:2;
    }
    .saving-ring{
      position:absolute;inset:0;
      width:64px;height:64px;
    }
    .saving-arc{
      transform-origin:28px 28px;
      animation:savingArcSpin 1.2s linear infinite;
    }
    @keyframes savingArcSpin{to{transform:rotate(360deg)}}

    /* ── SAVING STATUS TEXT ── */
    .saving-txt{
      font-family:'DM Sans',sans-serif;font-size:11px;font-weight:700;
      letter-spacing:.18em;text-transform:uppercase;
      background:linear-gradient(90deg,rgba(255,255,255,.9),rgba(249,168,212,.7),rgba(255,255,255,.9));
      background-size:200% 100%;
      -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
      animation:gateTxtShimmer 2.2s ease-in-out infinite, gtxtpulse 1.6s ease-in-out infinite;
    }

    /* ── STEP TRACKER ── */
    .saving-steps{
      display:flex;flex-direction:column;gap:10px;
      background:rgba(255,255,255,.04);
      border:1px solid rgba(236,72,153,.18);
      border-radius:16px;
      padding:16px 22px;
      min-width:220px;
    }
    .saving-step{
      display:flex;align-items:center;gap:10px;
      font-family:'DM Sans',sans-serif;font-size:12px;font-weight:600;
      color:rgba(255,255,255,.25);
      transition:color .4s ease, transform .3s ease;
    }
    .saving-step.on{
      color:rgba(255,255,255,.9);
      transform:translateX(4px);
    }
    .saving-step.done{
      color:rgba(192,132,252,.6);
    }
    .saving-step.done .sstep-dot{
      background:#c084fc;
      box-shadow:0 0 8px rgba(192,132,252,.6);
    }
    .sstep-dot{
      width:7px;height:7px;border-radius:50%;flex-shrink:0;
      background:rgba(255,255,255,.15);
      transition:background .4s, box-shadow .4s;
    }
    .saving-step.on .sstep-dot{
      background:#ec4899;
      box-shadow:0 0 10px rgba(236,72,153,.8);
      animation:sstepPulse .8s ease-in-out infinite;
    }
    @keyframes sstepPulse{0%,100%{box-shadow:0 0 10px rgba(236,72,153,.8)}50%{box-shadow:0 0 18px rgba(236,72,153,1)}}

    /* ── LAYOUT ── */
    .page{position:relative;z-index:1;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:32px 16px 48px;}

    /* ── LOGO ── */
    .logo{display:flex;align-items:center;gap:10px;text-decoration:none;margin-bottom:32px;}
    .logomark{width:36px;height:36px;border-radius:9px;background:linear-gradient(135deg,var(--ind),var(--ind2));display:flex;align-items:center;justify-content:center;font-family:'Orbitron',sans-serif;font-weight:900;font-size:12px;box-shadow:0 0 20px rgba(236,72,153,.35);}
    .logotxt{font-family:'Orbitron',sans-serif;font-weight:900;font-size:18px;letter-spacing:.08em;background:linear-gradient(135deg,var(--ind),var(--ind2),var(--ind3));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;}

    /* ── PROGRESS BAR ── */
    .progress-wrap{width:100%;max-width:680px;margin-bottom:28px;}
    .progress-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;}
    .progress-label{font-family:'Syne',sans-serif;font-size:12px;font-weight:700;color:var(--txt3);letter-spacing:.1em;text-transform:uppercase;}
    .progress-count{font-family:'Orbitron',sans-serif;font-size:11px;font-weight:700;color:var(--ind);letter-spacing:.08em;}
    .progress-track{height:3px;background:rgba(255,255,255,.06);border-radius:3px;overflow:hidden;}
    .progress-fill{height:100%;border-radius:3px;background:linear-gradient(90deg,var(--ind),var(--ind2),var(--ind3));transition:width .5s var(--ease);}

    /* ── STEP DOTS ── */
    .stepdots{display:flex;align-items:center;justify-content:center;gap:8px;margin-bottom:28px;}
    .stepdot{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.08);transition:all .3s var(--ease);cursor:default;}
    .stepdot.active{background:var(--ind);border-color:var(--ind);box-shadow:0 0 10px rgba(236,72,153,.6);transform:scale(1.3);}
    .stepdot.done{background:var(--green);border-color:var(--green);}

    /* ── CARD ── */
    .card{width:100%;max-width:680px;background:var(--bg2);border:1px solid var(--bdr);border-radius:24px;overflow:hidden;box-shadow:0 0 0 1px rgba(236,72,153,.04),0 32px 80px rgba(0,0,0,.7),0 0 60px rgba(236,72,153,.06);}
    .card-accent{height:3px;background:linear-gradient(90deg,var(--ind),var(--ind2),var(--ind3),var(--ind));background-size:300% 100%;animation:accentFlow 4s linear infinite;}
    @keyframes accentFlow{from{background-position:0 0}to{background-position:300% 0}}

    /* ── SLIDES CONTAINER ── */
    .slides{overflow:hidden;}
    .slide{display:none;}
    .slide.active{display:block;animation:slideIn .35s var(--ease) both;}
    .slide.back-active{display:block;animation:slideInBack .35s var(--ease) both;}
    @keyframes slideIn{from{opacity:0;transform:translateX(32px)}to{opacity:1;transform:none}}
    @keyframes slideInBack{from{opacity:0;transform:translateX(-32px)}to{opacity:1;transform:none}}

    /* ── SLIDE HEADER ── */
    .slide-head{padding:28px 32px 0;}
    .slide-icon{width:46px;height:46px;border-radius:13px;display:flex;align-items:center;justify-content:center;font-size:22px;margin-bottom:14px;position:relative;overflow:hidden;}
    .slide-icon::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(236,72,153,.25),rgba(168,85,247,.15));border:1px solid rgba(236,72,153,.3);}
    .slide-icon i{position:relative;z-index:1;font-size:22px;color:rgba(255,255,255,.85);}
    .slide-title{font-family:'Syne',sans-serif;font-size:22px;font-weight:800;color:var(--txt);margin-bottom:5px;line-height:1.2;}
    .slide-sub{font-size:13px;color:var(--txt2);line-height:1.6;margin-bottom:24px;}

    /* ── FORM BODY ── */
    .slide-body{padding:0 32px 28px;}

    /* ── FIELD ── */
    .field{margin-bottom:16px;}
    .field-row{display:grid;grid-template-columns:1fr 1fr;gap:14px;}
    .flbl{font-size:11px;font-weight:700;color:var(--txt3);letter-spacing:.08em;text-transform:uppercase;margin-bottom:7px;display:flex;align-items:center;justify-content:space-between;}
    .fopt{font-size:10px;font-weight:600;color:var(--ind);opacity:.7;}
    .finp{width:100%;padding:12px 14px;background:rgba(255,255,255,.03);border:1.5px solid var(--bdr);border-radius:11px;color:var(--txt);font-family:'DM Sans',sans-serif;font-size:14px;outline:none;transition:border-color .2s,box-shadow .2s;-webkit-appearance:none;}
    .finp::placeholder{color:var(--txt3);}
    .finp:focus{border-color:var(--bdrf);box-shadow:0 0 0 3px rgba(236,72,153,.1);}
    .finp.ok{border-color:var(--bdrok);}
    .finp.err{border-color:var(--bdrerr);}
    select.finp{cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='rgba(240,240,255,0.3)' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 14px center;padding-right:36px;}
    select.finp option{background:#1a1a2e;color:var(--txt);}
    textarea.finp{resize:vertical;min-height:80px;line-height:1.6;}

    /* ── CHECKBOX GROUP ── */
    .check-group{display:flex;flex-direction:column;gap:10px;margin-top:4px;}
    .check-item{display:flex;align-items:flex-start;gap:12px;padding:13px 14px;background:rgba(255,255,255,.02);border:1.5px solid var(--bdr);border-radius:11px;cursor:pointer;transition:all .2s;user-select:none;}
    .check-item:hover{background:rgba(236,72,153,.06);border-color:rgba(236,72,153,.25);}
    .check-item.checked{background:rgba(236,72,153,.08);border-color:rgba(236,72,153,.4);}
    .check-item.err-item{border-color:var(--bdrerr);}
    .cbox{width:20px;height:20px;border-radius:6px;border:1.5px solid rgba(255,255,255,.15);background:transparent;flex-shrink:0;margin-top:1px;display:flex;align-items:center;justify-content:center;transition:all .25s;font-size:12px;}
    .check-item.checked .cbox{background:linear-gradient(135deg,var(--ind),var(--ind2));border-color:var(--ind);box-shadow:0 0 10px rgba(236,72,153,.4);}
    .ctext{flex:1;}
    .ctext strong{display:block;font-size:13px;font-weight:600;color:var(--txt);margin-bottom:2px;}
    .ctext span{font-size:12px;color:var(--txt2);line-height:1.5;}

    /* ── MULTI SELECT CHIPS ── */
    .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:4px;}
    .chip{padding:8px 14px;border-radius:20px;border:1.5px solid var(--bdr);background:rgba(255,255,255,.02);color:var(--txt2);font-size:12px;font-weight:600;cursor:pointer;transition:all .2s;user-select:none;display:flex;align-items:center;gap:6px;}
    .chip:hover{border-color:rgba(236,72,153,.4);color:var(--txt);}
    .chip.sel{border-color:var(--ind);background:rgba(236,72,153,.12);color:var(--txt);box-shadow:0 0 12px rgba(236,72,153,.2);}
    .chip-icon{font-size:15px;display:flex;align-items:center;line-height:1;}
    .chip-icon i{font-size:15px;}

    /* ── TERMS SCROLL BOX ── */
    .terms-box{height:280px;overflow-y:auto;background:rgba(0,0,0,.3);border:1px solid var(--bdr);border-radius:12px;padding:18px 20px;font-size:12px;color:var(--txt2);line-height:1.8;margin-bottom:16px;scroll-behavior:smooth;}
    .terms-box::-webkit-scrollbar{width:4px;}
    .terms-box::-webkit-scrollbar-track{background:transparent;}
    .terms-box::-webkit-scrollbar-thumb{background:rgba(236,72,153,.3);border-radius:4px;}
    .terms-box h3{font-family:'Syne',sans-serif;font-size:14px;font-weight:700;color:var(--txt);margin:16px 0 6px;}
    .terms-box h3:first-child{margin-top:0;}
    .terms-box p{margin-bottom:10px;}
    .terms-scroll-hint{display:flex;align-items:center;gap:6px;font-size:11px;color:var(--txt3);margin-bottom:14px;}

    /* ── WARNING BOX ── */
    .warn-box{background:rgba(245,158,11,.07);border:1px solid rgba(245,158,11,.25);border-radius:12px;padding:14px 16px;font-size:12px;color:#fcd34d;line-height:1.7;margin-bottom:16px;}
    .warn-box strong{display:block;font-size:13px;font-weight:700;margin-bottom:4px;color:#fbbf24;}

    /* ── ALERT ── */
    .alert{display:none;align-items:flex-start;gap:10px;padding:11px 14px;border-radius:10px;font-size:12px;font-weight:600;line-height:1.5;margin-bottom:14px;}
    .alert.on{display:flex;animation:fin .25s ease both;}
    .alert.err{background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.3);color:#fca5a5;}
    .alert.ok{background:rgba(16,185,129,.1);border:1px solid rgba(16,185,129,.3);color:#6ee7b7;}
    @keyframes fin{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

    /* ── FOOTER BUTTONS ── */
    .slide-footer{padding:0 32px 28px;display:flex;align-items:center;gap:12px;}
    .btn-back{flex:0 0 auto;padding:12px 20px;border-radius:11px;border:1.5px solid var(--bdr);background:transparent;color:var(--txt2);font-family:'DM Sans',sans-serif;font-size:14px;font-weight:600;cursor:pointer;transition:all .25s;display:flex;align-items:center;gap:6px;}
    .btn-back:hover{border-color:rgba(255,255,255,.2);color:var(--txt);}
    .btn-back i{font-size:16px;}
    .btn-next{flex:1;padding:13px;border-radius:11px;border:none;background:linear-gradient(135deg,var(--ind),var(--ind2));color:#fff;font-family:'Syne',sans-serif;font-size:15px;font-weight:700;cursor:pointer;transition:all .3s var(--ease);box-shadow:0 4px 20px rgba(236,72,153,.3);display:flex;align-items:center;justify-content:center;gap:8px;position:relative;overflow:hidden;}
    .btn-next::before{content:'';position:absolute;inset:0;background:linear-gradient(180deg,rgba(255,255,255,.12),transparent);}
    .btn-next:hover{transform:translateY(-2px);box-shadow:0 8px 28px rgba(236,72,153,.45);}
    .btn-next:active{transform:translateY(1px);}
    .btn-next:disabled{opacity:.5;cursor:not-allowed;transform:none !important;}
    .btn-next.final{background:linear-gradient(135deg,var(--green),#059669);box-shadow:0 4px 20px rgba(16,185,129,.3);}
    .btn-next.final:hover{box-shadow:0 8px 28px rgba(16,185,129,.45);}
    /* spinner inside btn */
    .btn-spin{width:16px;height:16px;border-radius:50%;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;animation:spin .7s linear infinite;display:none;}
    .btn-next.loading .btn-spin{display:block;}
    .btn-next.loading .btn-lbl{display:none;}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* ── SUCCESS SCREEN ── */
    #successScreen{display:none;padding:48px 32px;text-align:center;}
    #successScreen.on{display:block;animation:fin .5s ease both;}
    .success-ring{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,var(--green),#059669);display:flex;align-items:center;justify-content:center;font-size:36px;margin:0 auto 20px;box-shadow:0 0 50px rgba(16,185,129,.4);animation:rpop .6s var(--bouncy) both;}
    @keyframes rpop{from{transform:scale(0)}to{transform:scale(1)}}
    .success-title{font-family:'Syne',sans-serif;font-size:26px;font-weight:800;color:var(--txt);margin-bottom:8px;}
    .success-sub{font-size:14px;color:var(--txt2);line-height:1.7;margin-bottom:28px;}
    .btn-launch{display:inline-flex;align-items:center;gap:10px;padding:14px 28px;border-radius:12px;border:none;background:linear-gradient(135deg,var(--ind),var(--ind2));color:#fff;font-family:'Syne',sans-serif;font-size:15px;font-weight:700;cursor:pointer;text-decoration:none;transition:all .3s;box-shadow:0 4px 20px rgba(236,72,153,.35);}
    .btn-launch:hover{transform:translateY(-2px);box-shadow:0 8px 28px rgba(236,72,153,.5);}
    .ldot{width:8px;height:8px;border-radius:50%;background:var(--green);box-shadow:0 0 8px var(--green);animation:ldpulse 2s ease infinite;}
    @keyframes ldpulse{0%,100%{opacity:1}50%{opacity:.3}}

    /* ══════════════════════════════════════════
       RESPONSIVE — PC (1200px+)
    ══════════════════════════════════════════ */
    @media(min-width:1200px){
      .page{padding:40px 24px 64px;}
      .card{max-width:760px;}
      .progress-wrap{max-width:760px;}
      .slide-head{padding:36px 40px 0;}
      .slide-body{padding:0 40px 32px;}
      .slide-footer{padding:0 40px 32px;}
      .slide-title{font-size:26px;}
      .slide-sub{font-size:14px;}
      .finp{font-size:15px;padding:13px 16px;}
      .flbl{font-size:12px;}
      .chip{font-size:13px;padding:10px 16px;}
      .terms-box{height:320px;font-size:13px;}
      .btn-next{font-size:16px;padding:15px;}
      .btn-back{font-size:14px;padding:13px 22px;}
      #successScreen{padding:60px 40px;}
      .success-title{font-size:30px;}
      .success-sub{font-size:15px;}
    }

    /* ══════════════════════════════════════════
       RESPONSIVE — TABLET
    ══════════════════════════════════════════ */
    @media(min-width:768px) and (max-width:1199px){
      .page{padding:32px 20px 56px;}
      .card{max-width:680px;}
      .progress-wrap{max-width:680px;}
      .slide-head{padding:28px 32px 0;}
      .slide-body{padding:0 32px 28px;}
      .slide-footer{padding:0 32px 28px;}
      .slide-title{font-size:22px;}
      .chip{font-size:12px;}
      .terms-box{height:300px;}
    }

    /* ══════════════════════════════════════════
       RESPONSIVE — MOBILE
    ══════════════════════════════════════════ */
    @media(max-width:767px){
      .page{padding:20px 12px 40px;}
      .logo{margin-bottom:20px;}
      .logotxt{font-size:16px;}
      .logomark{width:30px;height:30px;font-size:10px;}
      .progress-wrap{margin-bottom:16px;}
      .stepdots{gap:6px;margin-bottom:16px;}
      .stepdot{width:7px;height:7px;}
      .card{border-radius:18px;}
      .slide-head{padding:20px 16px 0;}
      .slide-icon{width:40px;height:40px;font-size:19px;border-radius:11px;margin-bottom:10px;}
      .slide-title{font-size:18px;margin-bottom:4px;}
      .slide-sub{font-size:12px;margin-bottom:18px;}
      .slide-body{padding:0 16px 20px;}
      .field{margin-bottom:13px;}
      .field-row{grid-template-columns:1fr;gap:0;}
      .flbl{font-size:11px;margin-bottom:6px;}
      .finp{font-size:13px;padding:11px 12px;}
      select.finp{padding-right:32px;}
      .chips{gap:6px;}
      .chip{font-size:11px;padding:7px 11px;border-radius:16px;min-width:0;flex:0 0 auto;}
      .chip-icon{font-size:13px;}
      .check-item{padding:11px 12px;gap:10px;}
      .cbox{width:18px;height:18px;font-size:11px;border-radius:5px;}
      .ctext strong{font-size:12px;}
      .ctext span{font-size:11px;}
      .terms-box{height:220px;padding:14px;font-size:11px;}
      .terms-box h3{font-size:12px;}
      .terms-scroll-hint{font-size:10px;}
      .warn-box{font-size:11px;padding:12px 13px;}
      .warn-box strong{font-size:12px;}
      .alert{font-size:11px;padding:10px 12px;}
      .slide-footer{padding:0 16px 20px;gap:8px;flex-wrap:wrap;}
      .btn-back{flex:0 0 auto;padding:11px 14px;font-size:13px;}
      .btn-next{font-size:14px;padding:12px;}
      #successScreen{padding:32px 16px;}
      .success-ring{width:64px;height:64px;font-size:28px;}
      .success-title{font-size:20px;}
      .success-sub{font-size:13px;}
      .btn-launch{font-size:13px;padding:12px 20px;}
    }

    @media(max-width:380px){
      .page{padding:14px 8px 32px;}
      .slide-head{padding:16px 14px 0;}
      .slide-body{padding:0 14px 16px;}
      .slide-footer{padding:0 14px 16px;flex-wrap:wrap;}
      .btn-back{flex:0 0 100%;order:2;justify-content:center;}
      .btn-next{flex:0 0 100%;order:1;}
      .slide-title{font-size:16px;}
      .chip{font-size:10px;padding:6px 9px;}
      .terms-box{height:180px;}
      .finp{font-size:12px;padding:10px 11px;}
    }

    @media(hover:none){
      .btn-next:hover{transform:none;}
      .btn-back:hover{background:transparent;}
      .chip:hover{transform:none;}
      .check-item:hover{background:rgba(255,255,255,.02);border-color:var(--bdr);}
    }
  </style>
</head>
<body>
  <div class="bg-layer bg-grid"></div>
  <div class="bg-layer bg-glow"></div>
  <div class="bg-layer bg-noise"></div>

  <!-- ══════════════════════════════════════════
       GATE SCREEN — covers page while auth resolves
       Hides once we confirm user is eligible to be here
  ══════════════════════════════════════════ -->
  <div id="gateScreen">
    <div class="gate-logo">
      <div class="gate-logomark">T1</div>
      <span class="gate-logotxt">T1ERA</span>
    </div>
    <div class="gate-spinner"><span></span></div>
    <div class="gate-txt" id="gateTxt">VERIFYING SESSION...</div>
    <div class="gate-pills">
      <div class="gate-pill"></div>
      <div class="gate-pill"></div>
      <div class="gate-pill"></div>
      <div class="gate-pill"></div>
      <div class="gate-pill"></div>
    </div>
  </div>

  <!-- ══════════════════════════════════════════
       SAVING SCREEN — Canva pink/purple overlay
       shown while Firestore is writing the profile
  ══════════════════════════════════════════ -->
  <div id="savingScreen">
    <div class="gate-logo">
      <div class="gate-logomark">T1</div>
      <span class="gate-logotxt">T1ERA</span>
    </div>
    <div class="saving-spinner">
      <span></span>
      <svg class="saving-ring" viewBox="0 0 56 56" xmlns="http://www.w3.org/2000/svg">
        <circle cx="28" cy="28" r="24" fill="none" stroke="rgba(236,72,153,.15)" stroke-width="3"/>
        <circle class="saving-arc" cx="28" cy="28" r="24" fill="none" stroke="url(#savingGrad)" stroke-width="3" stroke-linecap="round" stroke-dasharray="150.8" stroke-dashoffset="113"/>
        <defs>
          <linearGradient id="savingGrad" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#ec4899"/>
            <stop offset="100%" stop-color="#c084fc"/>
          </linearGradient>
        </defs>
      </svg>
    </div>
    <div class="saving-txt" id="savingTxt">SAVING YOUR PROFILE...</div>
    <div class="saving-steps" id="savingSteps">
      <div class="saving-step" id="sstep1"><span class="sstep-dot"></span>Encrypting your data</div>
      <div class="saving-step" id="sstep2"><span class="sstep-dot"></span>Connecting to servers</div>
      <div class="saving-step" id="sstep3"><span class="sstep-dot"></span>Writing to database</div>
      <div class="saving-step" id="sstep4"><span class="sstep-dot"></span>Finalising profile</div>
    </div>
    <div class="gate-pills">
      <div class="gate-pill"></div>
      <div class="gate-pill"></div>
      <div class="gate-pill"></div>
      <div class="gate-pill"></div>
      <div class="gate-pill"></div>
    </div>
  </div>

  <div class="page">
    <a href="home.html" class="logo">
      <div class="logomark">T1</div>
      <span class="logotxt">T1ERA</span>
    </a>

    <!-- PROGRESS -->
    <div class="progress-wrap">
      <div class="progress-top">
        <span class="progress-label">Account Setup</span>
        <span class="progress-count" id="progCount">Step 1 of 6</span>
      </div>
      <div class="progress-track"><div class="progress-fill" id="progFill" style="width:16.6%"></div></div>
    </div>

    <!-- STEP DOTS -->
    <div class="stepdots" id="stepdots"></div>

    <!-- CARD -->
    <div class="card">
      <div class="card-accent"></div>
      <div class="slides" id="slides">

        <!-- ══════════════════════════
             SLIDE 1 — PERSONAL INFO
        ══════════════════════════ -->
        <div class="slide active" id="s1">
          <div class="slide-head">
            <div class="slide-icon"><i class="ph-bold ph-user-circle"></i></div>
            <div class="slide-title">Tell Us About Yourself</div>
            <div class="slide-sub">This helps us personalise your T1ERA experience and verify your identity when needed.</div>
          </div>
          <div class="slide-body">
            <div class="alert err" id="s1Err"></div>
            <div class="field-row">
              <div class="field">
                <div class="flbl">Full Legal Name</div>
                <input class="finp" id="fullName" type="text" placeholder="e.g. Ahmad Zulkifli bin Rashid" autocomplete="name"/>
              </div>
              <div class="field">
                <div class="flbl">Nickname / Display Name</div>
                <input class="finp" id="nickname" type="text" placeholder="e.g. ZulAhmad, AZ99"/>
              </div>
            </div>
            <div class="field-row">
              <div class="field">
                <div class="flbl">Callsign <span class="fopt">Optional</span></div>
                <input class="finp" id="callsign" type="text" placeholder="e.g. PHANTOM-7, BRAVO"/>
              </div>
              <div class="field">
                <div class="flbl">Current Status</div>
                <select class="finp" id="userStatus">
                  <option value="">— Select your status —</option>
                  <option value="student">Student</option>
                  <option value="worker">Full-time Worker</option>
                  <option value="freelancer">Freelancer</option>
                  <option value="entrepreneur">Entrepreneur / Business Owner</option>
                  <option value="military">Military / Defence</option>
                  <option value="government">Government Officer</option>
                  <option value="retired">Retired</option>
                  <option value="unemployed">Currently Seeking Work</option>
                  <option value="other">Other</option>
                </select>
              </div>
            </div>
            <div class="field">
              <div class="flbl">Date of Birth</div>
              <input class="finp" id="dob" type="date"/>
            </div>
            <div class="field">
              <div class="flbl">Country / Region</div>
              <select class="finp" id="country">
                <option value="">— Select country —</option>
                <option value="MY">Malaysia</option>
                <option value="SG">Singapore</option>
                <option value="ID">Indonesia</option>
                <option value="TH">Thailand</option>
                <option value="PH">Philippines</option>
                <option value="VN">Vietnam</option>
                <option value="AU">Australia</option>
                <option value="GB">United Kingdom</option>
                <option value="US">United States</option>
                <option value="AE">UAE</option>
                <option value="SA">Saudi Arabia</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div class="field">
              <div class="flbl">City / State <span class="fopt">Optional</span></div>
              <input class="finp" id="city" type="text" placeholder="e.g. Kuala Lumpur, Selangor"/>
            </div>
          </div>
          <div class="slide-footer">
            <button class="btn-next" onclick="next(1)">
              <span class="btn-lbl">Continue <i class="ph-bold ph-arrow-right" style="vertical-align:-2px;"></i></span>
              <div class="btn-spin"></div>
            </button>
          </div>
        </div>

        <!-- ══════════════════════════
             SLIDE 2 — PURPOSE / WHY T1ERA
        ══════════════════════════ -->
        <div class="slide" id="s2">
          <div class="slide-head">
            <div class="slide-icon"><i class="ph-bold ph-crosshair-simple"></i></div>
            <div class="slide-title">Why Are You Here?</div>
            <div class="slide-sub">Select all that apply. This helps us tailor features, tools and content relevant to you.</div>
          </div>
          <div class="slide-body">
            <div class="alert err" id="s2Err"></div>
            <div class="field">
              <div class="flbl">Primary Purpose <span class="fopt">Choose all that apply</span></div>
              <div class="chips" id="purposeChips">
                <div class="chip" data-val="hobby"><span class="chip-icon"><i class="ph-bold ph-game-controller"></i></span>Hobby & Gaming</div>
                <div class="chip" data-val="work"><span class="chip-icon"><i class="ph-bold ph-briefcase"></i></span>Professional Work</div>
                <div class="chip" data-val="business"><span class="chip-icon"><i class="ph-bold ph-trend-up"></i></span>Business & Trade</div>
                <div class="chip" data-val="study"><span class="chip-icon"><i class="ph-bold ph-book-open"></i></span>Learning & Study</div>
                <div class="chip" data-val="ai_tools"><span class="chip-icon"><i class="ph-bold ph-robot"></i></span>AI Tools & Automation</div>
                <div class="chip" data-val="investment"><span class="chip-icon"><i class="ph-bold ph-currency-circle-dollar"></i></span>Investment & Finance</div>
                <div class="chip" data-val="content"><span class="chip-icon"><i class="ph-bold ph-video-camera"></i></span>Content Creation</div>
                <div class="chip" data-val="community"><span class="chip-icon"><i class="ph-bold ph-globe-hemisphere-west"></i></span>Community & Network</div>
                <div class="chip" data-val="research"><span class="chip-icon"><i class="ph-bold ph-flask"></i></span>Research & Development</div>
                <div class="chip" data-val="affiliate"><span class="chip-icon"><i class="ph-bold ph-handshake"></i></span>Affiliate & Referral</div>
                <div class="chip" data-val="payaround"><span class="chip-icon"><i class="ph-bold ph-compass"></i></span>Explore & Play Around</div>
                <div class="chip" data-val="crypto"><span class="chip-icon"><i class="ph-bold ph-circles-three-plus"></i></span>Crypto & Web3</div>
                <div class="chip" data-val="security"><span class="chip-icon"><i class="ph-bold ph-shield-check"></i></span>Cybersecurity</div>
                <div class="chip" data-val="other_purpose"><span class="chip-icon"><i class="ph-bold ph-lightning"></i></span>Other</div>
              </div>
            </div>
            <div class="field" style="margin-top:20px;">
              <div class="flbl">Industry / Field</div>
              <select class="finp" id="industry">
                <option value="">— Select your industry —</option>
                <option value="tech">Technology & Software</option>
                <option value="finance">Finance & Banking</option>
                <option value="education">Education</option>
                <option value="healthcare">Healthcare & Medical</option>
                <option value="military_def">Military & Defence</option>
                <option value="ecommerce">E-commerce & Retail</option>
                <option value="media">Media & Entertainment</option>
                <option value="logistics">Logistics & Supply Chain</option>
                <option value="construction">Construction & Engineering</option>
                <option value="agriculture">Agriculture</option>
                <option value="creative">Creative & Design</option>
                <option value="law">Legal & Compliance</option>
                <option value="student_field">Student (No Industry Yet)</option>
                <option value="other_ind">Other</option>
              </select>
            </div>
            <div class="field">
              <div class="flbl">Experience Level with AI Tools</div>
              <select class="finp" id="aiLevel">
                <option value="">— Select level —</option>
                <option value="none">None — completely new to AI</option>
                <option value="beginner">Beginner — heard about it, tried a little</option>
                <option value="intermediate">Intermediate — use AI tools regularly</option>
                <option value="advanced">Advanced — build or integrate AI systems</option>
                <option value="expert">Expert — develop or research AI</option>
              </select>
            </div>
          </div>
          <div class="slide-footer">
            <button class="btn-back" onclick="back(2)"><i class="ph-bold ph-arrow-left"></i> Back</button>
            <button class="btn-next" onclick="next(2)">
              <span class="btn-lbl">Continue <i class="ph-bold ph-arrow-right" style="vertical-align:-2px;"></i></span>
              <div class="btn-spin"></div>
            </button>
          </div>
        </div>

        <!-- ══════════════════════════
             SLIDE 3 — HOW DID YOU FIND US
        ══════════════════════════ -->
        <div class="slide" id="s3">
          <div class="slide-head">
            <div class="slide-icon"><i class="ph-bold ph-broadcast"></i></div>
            <div class="slide-title">How Did You Find T1ERA?</div>
            <div class="slide-sub">Understanding how you discovered us helps us grow and reach more people like you.</div>
          </div>
          <div class="slide-body">
            <div class="alert err" id="s3Err"></div>
            <div class="field">
              <div class="flbl">Discovery Source <span class="fopt">Choose all that apply</span></div>
              <div class="chips" id="sourceChips">
                <div class="chip" data-val="friend"><span class="chip-icon"><i class="ph-bold ph-users"></i></span>Friend / Family</div>
                <div class="chip" data-val="telegram"><span class="chip-icon"><i class="ph-bold ph-paper-plane-tilt"></i></span>Telegram Group</div>
                <div class="chip" data-val="whatsapp"><span class="chip-icon"><i class="ph-bold ph-chats"></i></span>WhatsApp / Chat</div>
                <div class="chip" data-val="tiktok"><span class="chip-icon"><i class="ph-bold ph-music-notes"></i></span>TikTok</div>
                <div class="chip" data-val="instagram"><span class="chip-icon"><i class="ph-bold ph-instagram-logo"></i></span>Instagram</div>
                <div class="chip" data-val="youtube"><span class="chip-icon"><i class="ph-bold ph-youtube-logo"></i></span>YouTube</div>
                <div class="chip" data-val="twitter"><span class="chip-icon"><i class="ph-bold ph-twitter-logo"></i></span>X / Twitter</div>
                <div class="chip" data-val="facebook"><span class="chip-icon"><i class="ph-bold ph-facebook-logo"></i></span>Facebook</div>
                <div class="chip" data-val="google_search"><span class="chip-icon"><i class="ph-bold ph-magnifying-glass"></i></span>Google Search</div>
                <div class="chip" data-val="reddit"><span class="chip-icon"><i class="ph-bold ph-reddit-logo"></i></span>Reddit / Forum</div>
                <div class="chip" data-val="news"><span class="chip-icon"><i class="ph-bold ph-newspaper"></i></span>News / Blog Article</div>
                <div class="chip" data-val="event"><span class="chip-icon"><i class="ph-bold ph-calendar-star"></i></span>Event / Conference</div>
                <div class="chip" data-val="affiliate_ref"><span class="chip-icon"><i class="ph-bold ph-link-simple"></i></span>Affiliate / Referral Link</div>
                <div class="chip" data-val="other_src"><span class="chip-icon"><i class="ph-bold ph-lightning"></i></span>Other</div>
              </div>
            </div>
            <div class="field" style="margin-top:20px;">
              <div class="flbl">Referral Code <span class="fopt">Optional</span></div>
              <input class="finp" id="refCode" type="text" placeholder="Enter referral code if you have one"/>
            </div>
            <div class="field">
              <div class="flbl">Anything Else? <span class="fopt">Optional</span></div>
              <textarea class="finp" id="discovery" placeholder="Tell us more about how you found T1ERA or what you heard about us..."></textarea>
            </div>
          </div>
          <div class="slide-footer">
            <button class="btn-back" onclick="back(3)"><i class="ph-bold ph-arrow-left"></i> Back</button>
            <button class="btn-next" onclick="next(3)">
              <span class="btn-lbl">Continue <i class="ph-bold ph-arrow-right" style="vertical-align:-2px;"></i></span>
              <div class="btn-spin"></div>
            </button>
          </div>
        </div>

        <!-- ══════════════════════════
             SLIDE 4 — CONTACT & RECOVERY
        ══════════════════════════ -->
        <div class="slide" id="s4">
          <div class="slide-head">
            <div class="slide-icon"><i class="ph-bold ph-lock-key"></i></div>
            <div class="slide-title">Recovery & Verification Info</div>
            <div class="slide-sub">This information is used <strong>only</strong> for account recovery, identity verification, and affiliate payment processing. Keep it accurate.</div>
          </div>
          <div class="slide-body">
            <div class="alert err" id="s4Err"></div>
            <div class="warn-box">
              <strong><i class="ph-bold ph-warning" style="vertical-align:-2px;margin-right:5px;"></i>Important — Please Read</strong>
              This section collects your real contact information. It will be used when:
              <br>• You lose access to your account and need manual verification
              <br>• T1ERA verifies your identity for affiliate or partner status
              <br>• Processing verified withdrawal payments
              <br><br>
              <strong>Providing false or fake information is a serious violation of T1ERA's Terms of Service.</strong> Any account found with fraudulent recovery details will be permanently suspended and any pending payments will be voided with no exception.
            </div>
            <div class="field">
              <div class="flbl">Real Phone Number</div>
              <input class="finp" id="phone" type="tel" placeholder="e.g. +60 12-345 6789 (with country code)"/>
            </div>
            <div class="field-row">
              <div class="field">
                <div class="flbl">Current / Primary Email</div>
                <input class="finp" id="emailPrimary" type="email" placeholder="Your active email"/>
              </div>
              <div class="field">
                <div class="flbl">Backup Email</div>
                <input class="finp" id="emailBackup" type="email" placeholder="Different from primary"/>
              </div>
            </div>
            <div class="field">
              <div class="flbl">Preferred Contact Method</div>
              <select class="finp" id="contactPref">
                <option value="">— Select preference —</option>
                <option value="telegram">Telegram</option>
                <option value="whatsapp">WhatsApp</option>
                <option value="email">Email</option>
                <option value="phone">Phone Call</option>
                <option value="sms">SMS</option>
              </select>
            </div>
            <div class="field">
              <div class="flbl">Emergency Contact Name <span class="fopt">Optional but recommended</span></div>
              <input class="finp" id="emergencyName" type="text" placeholder="Trusted person who can verify your identity"/>
            </div>
            <div class="field">
              <div class="flbl">Emergency Contact Phone <span class="fopt">Optional</span></div>
              <input class="finp" id="emergencyPhone" type="tel" placeholder="Their phone number with country code"/>
            </div>
          </div>
          <div class="slide-footer">
            <button class="btn-back" onclick="back(4)"><i class="ph-bold ph-arrow-left"></i> Back</button>
            <button class="btn-next" onclick="next(4)">
              <span class="btn-lbl">Continue <i class="ph-bold ph-arrow-right" style="vertical-align:-2px;"></i></span>
              <div class="btn-spin"></div>
            </button>
          </div>
        </div>

        <!-- ══════════════════════════
             SLIDE 5 — PREFERENCES
        ══════════════════════════ -->
        <div class="slide" id="s5">
          <div class="slide-head">
            <div class="slide-icon"><i class="ph-bold ph-sliders-horizontal"></i></div>
            <div class="slide-title">Your Preferences</div>
            <div class="slide-sub">Customise your T1ERA experience. You can change these anytime from your profile settings.</div>
          </div>
          <div class="slide-body">
            <div class="alert err" id="s5Err"></div>
            <div class="field">
              <div class="flbl">Preferred Language</div>
              <select class="finp" id="language">
                <option value="en">English</option>
                <option value="my">Bahasa Malaysia</option>
                <option value="id">Bahasa Indonesia</option>
                <option value="zh">Chinese (Simplified)</option>
                <option value="ar">Arabic</option>
                <option value="th">Thai</option>
                <option value="other_lang">Other</option>
              </select>
            </div>
            <div class="field">
              <div class="flbl">Notification Preferences <span class="fopt">Choose all that apply</span></div>
              <div class="chips" id="notifChips">
                <div class="chip" data-val="n_updates"><span class="chip-icon"><i class="ph-bold ph-megaphone"></i></span>Platform Updates</div>
                <div class="chip" data-val="n_security"><span class="chip-icon"><i class="ph-bold ph-shield-warning"></i></span>Security Alerts</div>
                <div class="chip" data-val="n_news"><span class="chip-icon"><i class="ph-bold ph-newspaper"></i></span>T1ERA News</div>
                <div class="chip" data-val="n_affiliate"><span class="chip-icon"><i class="ph-bold ph-wallet"></i></span>Affiliate Earnings</div>
                <div class="chip" data-val="n_ai"><span class="chip-icon"><i class="ph-bold ph-cpu"></i></span>New AI Features</div>
                <div class="chip" data-val="n_events"><span class="chip-icon"><i class="ph-bold ph-star"></i></span>Events & Webinars</div>
              </div>
            </div>
            <div class="field" style="margin-top:20px;">
              <div class="flbl">How Would You Rate Your Tech Comfort?</div>
              <select class="finp" id="techComfort">
                <option value="">— Select level —</option>
                <option value="basic">Basic — I mainly use apps on my phone</option>
                <option value="moderate">Moderate — Comfortable with computers</option>
                <option value="advanced">Advanced — I can set up systems & tools</option>
                <option value="developer">Developer — I write code</option>
              </select>
            </div>
            <div class="field">
              <div class="flbl">Goals With T1ERA <span class="fopt">Short description</span></div>
              <textarea class="finp" id="goals" placeholder="e.g. I want to automate my business workflows using AI tools and build passive income through the affiliate programme..."></textarea>
            </div>
          </div>
          <div class="slide-footer">
            <button class="btn-back" onclick="back(5)"><i class="ph-bold ph-arrow-left"></i> Back</button>
            <button class="btn-next" onclick="next(5)">
              <span class="btn-lbl">Continue <i class="ph-bold ph-arrow-right" style="vertical-align:-2px;"></i></span>
              <div class="btn-spin"></div>
            </button>
          </div>
        </div>

        <!-- ══════════════════════════
             SLIDE 6 — TERMS & CONDITIONS
        ══════════════════════════ -->
        <div class="slide" id="s6">
          <div class="slide-head">
            <div class="slide-icon"><i class="ph-bold ph-files"></i></div>
            <div class="slide-title">Terms & Conditions</div>
            <div class="slide-sub">Please read and scroll through the full terms below, then tick all three checkboxes to proceed.</div>
          </div>
          <div class="slide-body">
            <div class="alert err" id="s6Err"></div>
            <div class="alert ok" id="s6Ok"></div>

            <div class="terms-scroll-hint"><i class="ph-bold ph-book-open-text" style="font-size:13px;"></i> Scroll down to read all terms before ticking</div>

            <div class="terms-box" id="termsBox">
              <h3>1. Acceptance of Terms</h3>
              <p>By creating a T1ERA account, you agree to be legally bound by these Terms and Conditions, our Privacy Policy, and all applicable laws and regulations. If you do not agree with any part of these terms, you must not use T1ERA services.</p>

              <h3>2. Account Eligibility</h3>
              <p>You must be at least 13 years of age to use T1ERA. If you are under 18, you represent that you have your parent or guardian's permission. Accounts found to be created fraudulently or by ineligible users will be terminated without notice or refund.</p>

              <h3>3. Accurate Information Obligation</h3>
              <p>You agree to provide truthful, accurate, current, and complete information during registration and account setup. This includes your full legal name, contact details, and recovery information. Providing false or misleading information constitutes a material breach of these terms and may result in immediate account termination.</p>

              <h3>4. Recovery & Verification Data</h3>
              <p>The phone number, backup email, and emergency contact information you provide are stored securely and used exclusively for account recovery, identity verification for affiliate or partner programmes, and processing verified payments. Providing fake recovery information disqualifies you from any dispute resolution process and voids any pending transactions.</p>

              <h3>5. Prohibited Activities</h3>
              <p>You agree not to: (a) use T1ERA for any unlawful purpose; (b) attempt to bypass security measures; (c) impersonate another person or entity; (d) distribute spam, malware, or harmful content; (e) abuse affiliate or referral systems through fraudulent means; (f) engage in money laundering or financial fraud of any kind.</p>

              <h3>6. Affiliate & Payment Programme</h3>
              <p>Participation in T1ERA's affiliate or payment programmes requires a verified account with accurate personal information. Payments will only be processed to verified members. T1ERA reserves the right to withhold or void payments from accounts that cannot be verified or are found to have violated these terms. All decisions regarding payment disputes are final.</p>

              <h3>7. Intellectual Property</h3>
              <p>All content, branding, AI tools, and systems within T1ERA are proprietary. You may not copy, reproduce, or redistribute any part of the platform without explicit written permission from T1ERA.</p>

              <h3>8. Limitation of Liability</h3>
              <p>T1ERA is provided "as is" without warranties of any kind. T1ERA shall not be liable for any indirect, incidental, or consequential damages arising from your use of the platform. Your sole remedy for dissatisfaction is to discontinue use of the service.</p>

              <h3>9. Privacy & Data</h3>
              <p>Your data is handled in accordance with our Privacy Policy. We do not sell your personal information to third parties. Data collected during account setup is used solely for service delivery, verification, and improvement of T1ERA.</p>

              <h3>10. Termination</h3>
              <p>T1ERA reserves the right to suspend or terminate any account at any time for violation of these terms, suspicious activity, or for any reason at T1ERA's sole discretion. Upon termination, your right to use the service ceases immediately.</p>

              <h3>11. Changes to Terms</h3>
              <p>T1ERA may update these terms at any time. Continued use of the platform after changes constitutes your acceptance of the updated terms. We will notify you of material changes via your registered email.</p>

              <h3>12. Governing Law</h3>
              <p>These terms are governed by the laws of Malaysia. Any disputes arising from these terms shall be subject to the exclusive jurisdiction of the courts of Malaysia.</p>

              <p style="margin-top:16px;padding-top:14px;border-top:1px solid rgba(255,255,255,.06);color:rgba(240,240,255,.3);font-size:11px;">Last updated: February 2026 · T1ERA Platform · All Rights Reserved</p>
            </div>

            <div class="check-group">
              <label class="check-item" id="chk1Wrap" onclick="toggleChk('chk1','chk1Wrap')">
                <div class="cbox" id="chk1"></div>
                <div class="ctext">
                  <strong>I have read and agree to the Terms & Conditions</strong>
                  <span>I confirm I have scrolled through and understood the full terms above.</span>
                </div>
              </label>
              <label class="check-item" id="chk2Wrap" onclick="toggleChk('chk2','chk2Wrap')">
                <div class="cbox" id="chk2"></div>
                <div class="ctext">
                  <strong>I confirm all information I provided is truthful and accurate</strong>
                  <span>I understand that false information may result in account termination and voided payments.</span>
                </div>
              </label>
              <label class="check-item" id="chk3Wrap" onclick="toggleChk('chk3','chk3Wrap')">
                <div class="cbox" id="chk3"></div>
                <div class="ctext">
                  <strong>I am at least 13 years old and eligible to use T1ERA</strong>
                  <span>If under 18, I confirm I have parental or guardian permission to create this account.</span>
                </div>
              </label>
            </div>
          </div>
          <div class="slide-footer">
            <button class="btn-back" onclick="back(6)"><i class="ph-bold ph-arrow-left"></i> Back</button>
            <button class="btn-next final" id="finalBtn" onclick="next(6)">
              <span class="btn-lbl"><i class="ph-bold ph-check-circle" style="font-size:16px;vertical-align:-2px;margin-right:4px;"></i>Agree & Complete Setup</span>
              <div class="btn-spin"></div>
            </button>
          </div>
        </div>

      </div><!-- /slides -->

      <!-- SUCCESS SCREEN -->
      <div id="successScreen">
        <div class="success-ring"><i class="ph-bold ph-confetti"></i></div>
        <div class="success-title">You're All Set!</div>
        <div class="success-sub" id="successMsg">
          Welcome to T1ERA. Your profile has been saved successfully.<br>
          Your account is now active and ready to use.
        </div>
        <a href="https://t1era.netlify.app/" class="btn-launch">
          <span class="ldot"></span> Continue to T1ERA
        </a>
      </div>

    </div><!-- /card -->
  </div>

  <!-- ═══════════════════════════════════
       FIREBASE SDK (Module)
  ═══════════════════════════════════ -->
  <script type="module">
    import { initializeApp }        from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
    import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js';
    import {
      getFirestore,
      doc,
      getDoc,
      setDoc,
      serverTimestamp
    } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';

    const app = initializeApp({
      apiKey:            "AIzaSyBnt9mbb8LdMVeguSHUmS20L6uBHIfxwAs",
      authDomain:        "t1era-v2.firebaseapp.com",
      projectId:         "t1era-v2",
      storageBucket:     "t1era-v2.firebasestorage.app",
      messagingSenderId: "279266491659",
      appId:             "1:279266491659:web:28a03c7b7300fcb152b60e"
    });

    const auth = getAuth(app);
    const db   = getFirestore(app);

    // Make db & helpers available globally so the vanilla JS below can call them
    window._db             = db;
    window._doc            = doc;
    window._setDoc         = setDoc;
    window._serverTimestamp = serverTimestamp;

    // ══════════════════════════════════════════════════
    // GATEKEEPER — mirrors the logic in auth.html
    //
    // CASE 1: Not logged in  →  redirect to auth.html
    // CASE 2: Logged in + setup already done  →  redirect to home.html
    // CASE 3: Logged in + setup NOT done  →  stay here, reveal page
    // ══════════════════════════════════════════════════
    const gateScreen = document.getElementById('gateScreen');
    const gateTxt    = document.getElementById('gateTxt');

    onAuthStateChanged(auth, async (user) => {
      if (!user) {
        // ── CASE 1: Not authenticated ──
        gateTxt.textContent = 'REDIRECTING TO SIGN IN...';
        setTimeout(() => { window.location.href = 'auth.html'; }, 800);
        return;
      }

      // User is authenticated — check if setup is already completed
      try {
        const snap = await getDoc(doc(db, 'users', user.uid));

        if (snap.exists() && snap.data().setupCompletedAt) {
          // ── CASE 2: Setup already done — send to home ──
          gateTxt.textContent = 'SETUP COMPLETE — REDIRECTING...';
          setTimeout(() => { window.location.href = 'home.html'; }, 800);
          return;
        }
      } catch (err) {
        // Firestore read failed (network, permissions, etc.)
        // Don't block the user — let them proceed with setup
        console.warn('Gatekeeper Firestore check failed:', err);
      }

      // ── CASE 3: Authenticated, setup incomplete — reveal the page ──
      window._currentUser = user;

      // Pre-fill primary email from Google account if blank
      const epInp = document.getElementById('emailPrimary');
      if (epInp && !epInp.value && user.email) epInp.value = user.email;

      // Dismiss the gate screen with a smooth fade
      gateScreen.style.transition = 'opacity 0.4s ease';
      gateScreen.style.opacity    = '0';
      setTimeout(() => gateScreen.classList.add('hidden'), 420);
    });
  </script>

  <!-- ═══════════════════════════════════
       UI + NAVIGATION + SUBMISSION
  ═══════════════════════════════════ -->
  <script>
    const TOTAL   = 6;
    let current   = 1;
    let goingBack = false;

    /* ── CHIP TOGGLE ── */
    document.querySelectorAll('.chips').forEach(group => {
      group.querySelectorAll('.chip').forEach(chip => {
        chip.addEventListener('click', () => chip.classList.toggle('sel'));
      });
    });

    /* ── CHECKBOX TOGGLE ── */
    window.toggleChk = function(boxId, wrapId){
      const box  = document.getElementById(boxId);
      const wrap = document.getElementById(wrapId);
      const on   = wrap.classList.toggle('checked');
      box.textContent = on ? '✓' : '';
      wrap.classList.remove('err-item');
    };

    /* ── STEP DOTS ── */
    function renderDots(){
      const c = document.getElementById('stepdots');
      c.innerHTML = '';
      for(let i = 1; i <= TOTAL; i++){
        const d = document.createElement('div');
        d.className = 'stepdot' + (i === current ? ' active' : i < current ? ' done' : '');
        c.appendChild(d);
      }
    }

    /* ── PROGRESS ── */
    function updateProgress(n){
      document.getElementById('progFill').style.width = ((n / TOTAL) * 100) + '%';
      document.getElementById('progCount').textContent = `Step ${n} of ${TOTAL}`;
    }

    /* ── ALERTS ── */
    function showErr(id, msg){
      const el = document.getElementById(id);
      el.innerHTML = '<i class="ph-bold ph-warning" style="vertical-align:-2px;margin-right:5px;"></i>' + msg;
      el.className = 'alert err on';
      el.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
    function clrErr(id){ document.getElementById(id).className = 'alert err'; }

    /* ── VALIDATION ── */
    function validate(n){
      clrErr('s' + n + 'Err');

      if(n === 1){
        if(!document.getElementById('fullName').value.trim())
          return showErr('s1Err','Full legal name is required.'), false;
        if(!document.getElementById('nickname').value.trim())
          return showErr('s1Err','Nickname / Display Name is required.'), false;
        if(!document.getElementById('userStatus').value)
          return showErr('s1Err','Please select your current status.'), false;
        if(!document.getElementById('dob').value)
          return showErr('s1Err','Date of birth is required.'), false;
        if(!document.getElementById('country').value)
          return showErr('s1Err','Please select your country.'), false;
        return true;
      }

      if(n === 2){
        const sel = document.querySelectorAll('#purposeChips .chip.sel');
        if(sel.length === 0)
          return showErr('s2Err','Please select at least one purpose.'), false;
        if(!document.getElementById('industry').value)
          return showErr('s2Err','Please select your industry.'), false;
        if(!document.getElementById('aiLevel').value)
          return showErr('s2Err','Please select your AI experience level.'), false;
        return true;
      }

      if(n === 3){
        const sel = document.querySelectorAll('#sourceChips .chip.sel');
        if(sel.length === 0)
          return showErr('s3Err','Please select at least one option for how you found T1ERA.'), false;
        return true;
      }

      if(n === 4){
        const phone = document.getElementById('phone').value.trim();
        const ep    = document.getElementById('emailPrimary').value.trim();
        const eb    = document.getElementById('emailBackup').value.trim();
        const cp    = document.getElementById('contactPref').value;
        if(!phone)
          return showErr('s4Err','Real phone number is required.'), false;
        if(!/^\+?[\d\s\-().]{7,20}$/.test(phone))
          return showErr('s4Err','Please enter a valid phone number with country code (e.g. +60 12-345 6789).'), false;
        if(!ep)
          return showErr('s4Err','Primary email is required.'), false;
        if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ep))
          return showErr('s4Err','Primary email format is invalid.'), false;
        if(!eb)
          return showErr('s4Err','Backup email is required.'), false;
        if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(eb))
          return showErr('s4Err','Backup email format is invalid.'), false;
        if(ep.toLowerCase() === eb.toLowerCase())
          return showErr('s4Err','Backup email must be different from your primary email.'), false;
        if(!cp)
          return showErr('s4Err','Please select your preferred contact method.'), false;
        return true;
      }

      if(n === 5){
        if(!document.getElementById('techComfort').value)
          return showErr('s5Err','Please select your tech comfort level.'), false;
        return true;
      }

      if(n === 6){
        const c1 = document.getElementById('chk1Wrap').classList.contains('checked');
        const c2 = document.getElementById('chk2Wrap').classList.contains('checked');
        const c3 = document.getElementById('chk3Wrap').classList.contains('checked');
        if(!c1) document.getElementById('chk1Wrap').classList.add('err-item');
        if(!c2) document.getElementById('chk2Wrap').classList.add('err-item');
        if(!c3) document.getElementById('chk3Wrap').classList.add('err-item');
        if(!c1 || !c2 || !c3)
          return showErr('s6Err','You must tick all three checkboxes to continue.'), false;
        return true;
      }

      return true;
    }

    /* ── NAVIGATE ── */
    function goTo(n, backwards){
      const from = document.getElementById('s' + current);
      const to   = document.getElementById('s' + n);

      from.classList.remove('active', 'back-active');
      to.classList.remove('active', 'back-active');
      if(backwards){
        to.classList.add('back-active');
      } else {
        to.classList.add('active');
      }

      current = n;
      updateProgress(n);
      renderDots();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    /* ── COLLECT ALL DATA ── */
    function collectFormData(){
      function chips(groupId){
        return Array.from(document.querySelectorAll('#' + groupId + ' .chip.sel'))
                    .map(c => c.getAttribute('data-val'));
      }

      return {
        // Slide 1 — Personal
        fullName:        document.getElementById('fullName').value.trim(),
        nickname:        document.getElementById('nickname').value.trim(),
        callsign:        document.getElementById('callsign').value.trim(),
        userStatus:      document.getElementById('userStatus').value,
        dob:             document.getElementById('dob').value,
        country:         document.getElementById('country').value,
        city:            document.getElementById('city').value.trim(),

        // Slide 2 — Purpose
        purposes:        chips('purposeChips'),
        industry:        document.getElementById('industry').value,
        aiLevel:         document.getElementById('aiLevel').value,

        // Slide 3 — Discovery
        discoverySources: chips('sourceChips'),
        refCode:          document.getElementById('refCode').value.trim(),
        discoveryNote:    document.getElementById('discovery').value.trim(),

        // Slide 4 — Contact
        phone:            document.getElementById('phone').value.trim(),
        emailPrimary:     document.getElementById('emailPrimary').value.trim(),
        emailBackup:      document.getElementById('emailBackup').value.trim(),
        contactPref:      document.getElementById('contactPref').value,
        emergencyName:    document.getElementById('emergencyName').value.trim(),
        emergencyPhone:   document.getElementById('emergencyPhone').value.trim(),

        // Slide 5 — Preferences
        language:         document.getElementById('language').value,
        notifications:    chips('notifChips'),
        techComfort:      document.getElementById('techComfort').value,
        goals:            document.getElementById('goals').value.trim(),

        // Slide 6 — Agreement
        agreedToTerms:     true,
        agreedAllAccurate: true,
        agreedAgeEligible: true,

        // Meta
        setupCompletedAt: window._serverTimestamp ? window._serverTimestamp() : new Date().toISOString(),
        setupVersion:     '1.0'
      };
    }

    /* ── SAVING SCREEN HELPERS ── */
    function showSavingScreen(){
      const s = document.getElementById('savingScreen');
      // reset all steps
      ['sstep1','sstep2','sstep3','sstep4'].forEach(id => {
        const el = document.getElementById(id);
        el.classList.remove('on','done');
      });
      document.getElementById('savingTxt').textContent = 'SAVING YOUR PROFILE...';
      s.classList.remove('off');
      s.classList.add('on');

      // animate steps sequentially — purely cosmetic, gives a feeling of work being done
      const steps = ['sstep1','sstep2','sstep3','sstep4'];
      const delays = [0, 600, 1200, 1900];
      steps.forEach((id, i) => {
        setTimeout(() => {
          // mark previous as done
          if(i > 0) {
            document.getElementById(steps[i-1]).classList.remove('on');
            document.getElementById(steps[i-1]).classList.add('done');
          }
          document.getElementById(id).classList.add('on');
        }, delays[i]);
      });
    }

    function hideSavingScreen(cb){
      const s = document.getElementById('savingScreen');
      s.classList.add('off');
      setTimeout(() => {
        s.classList.remove('on','off');
        if(cb) cb();
      }, 420);
    }

    /* ── SUBMIT TO FIRESTORE ── */
    async function submitToFirestore(){
      const btn = document.getElementById('finalBtn');
      btn.disabled = true;
      btn.classList.add('loading');
      clrErr('s6Err');

      // ✨ Show the Canva-style saving overlay immediately
      showSavingScreen();

      // Wait for Firebase to be ready (auth state sets _currentUser)
      let retries = 0;
      while(!window._currentUser && retries < 20){
        await new Promise(r => setTimeout(r, 250));
        retries++;
      }

      if(!window._currentUser){
        hideSavingScreen(() => {
          btn.disabled = false;
          btn.classList.remove('loading');
          showErr('s6Err', 'Session expired. Please <a href="auth.html" style="color:var(--ind)">sign in again</a>.');
        });
        return;
      }

      const uid  = window._currentUser.uid;
      const user = window._currentUser;
      const data = collectFormData();

      // ── PROFILE PICTURE ──
      data.profilePicture = {
        url:      user.photoURL || '',
        source:   user.photoURL ? 'google' : '',
        updatedAt: ''
      };

      // ── PLATFORM FIELDS ──
      data.plan = {
        type:      'free',
        startedAt: '',
        expiresAt: '',
        features:  []
      };

      data.balance = {
        amount:    0,
        currency:  'MYR',
        lastTopUp: '',
        lastSpent: ''
      };

      data.rank = {
        level:     1,
        title:     'Recruit',
        xp:        0,
        updatedAt: ''
      };

      data.accountStatus = {
        type:       'standard',
        verified:   false,
        verifiedAt: '',
        badge:      ''
      };

      data.points = {
        total:     0,
        available: 0,
        spent:     0,
        updatedAt: ''
      };

      data.affiliate = {
        id:          '',
        status:      'none',
        referredBy:  data.refCode || '',
        totalReferred: 0,
        totalEarned:   0,
        pendingPayout: 0,
        joinedAt:    ''
      };

      // Ensure the saving screen has been visible for at least 2.4s
      // so the step animation finishes gracefully before we dismiss
      const saveStart = Date.now();

      try {
        await window._setDoc(
          window._doc(window._db, 'users', uid),
          data,
          { merge: true }
        );

        // ✅ Mark last step done, update text, then fade out
        const elapsed   = Date.now() - saveStart;
        const remaining = Math.max(0, 2600 - elapsed);

        setTimeout(() => {
          // Mark all steps done
          ['sstep1','sstep2','sstep3','sstep4'].forEach(id => {
            const el = document.getElementById(id);
            el.classList.remove('on');
            el.classList.add('done');
          });
          document.getElementById('savingTxt').textContent = 'PROFILE SAVED!';

          // Brief pause so user sees "PROFILE SAVED!" then fade out
          setTimeout(() => {
            hideSavingScreen(() => {
              // Reveal success screen
              document.getElementById('s6').style.display = 'none';
              const successScreen = document.getElementById('successScreen');
              successScreen.classList.add('on');
              document.getElementById('progFill').style.width = '100%';
              document.getElementById('progCount').textContent = 'Complete ✓';
              document.getElementById('successMsg').innerHTML =
                'Welcome to T1ERA, <strong>' + (data.nickname || data.fullName) + '</strong>!<br>' +
                'Your profile has been saved to our system.<br>' +
                'Your account is now active and ready to use.';
              renderDots();
            });
          }, 700);
        }, remaining);

      } catch(err) {
        console.error('Firestore error:', err);

        hideSavingScreen(() => {
          btn.disabled = false;
          btn.classList.remove('loading');

          if(err.code === 'permission-denied'){
            showErr('s6Err',
              'Permission denied. Please make sure your email is verified, then try again. ' +
              '<a href="auth.html" style="color:var(--ind)">Go to sign-in →</a>');
          } else if(err.code === 'unavailable' || err.message.includes('network')){
            showErr('s6Err', 'Network error. Check your internet connection and try again.');
          } else {
            showErr('s6Err', 'Something went wrong (' + (err.code || err.message) + '). Please try again.');
          }
        });
      }
    }

    /* ── NEXT & BACK ── */
    window.next = function(n){
      if(!validate(n)) return;

      if(n === TOTAL){
        submitToFirestore();
        return;
      }
      goTo(n + 1, false);
    };

    window.back = function(n){
      if(n <= 1) return;
      goTo(n - 1, true);
    };

    /* ── ENTER KEY SUPPORT ── */
    document.addEventListener('keydown', e => {
      if(e.key !== 'Enter') return;
      if(e.target.tagName === 'TEXTAREA') return;
      next(current);
    });

    /* ── INIT ── */
    renderDots();
    updateProgress(1);
  </script>
</body>
</html>
